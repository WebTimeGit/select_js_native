const CustomSelect=function(e){let t,l,s=e.elem?document.getElementById(e.elem):e.elem,n=s.querySelectorAll("optgroup"),c=s.options,a=c[s.selectedIndex],o=0,i=0,d="selected",r="select_img",m="lazy";localStorage.getItem("selected")&&(s.selectedIndex=localStorage.getItem("selected"));const g=document.createElement("div");g.className="custom_select",s.id&&(g.id=`custom-${s.id}`);let u=document.createElement("button"),p=document.createElement("span");if(u.appendChild(p),u.className="select_title",p.textContent=c[0].textContent,a.getAttribute("data-srcImg")){let e=document.createElement("img");e.setAttribute("src",`${a.getAttribute("data-srcImg")}`),u.appendChild(e)}const L=document.createElement("ul");if(L.className="select_list",n.length>0)for(let e=0;e<n.length;e++){const t=document.createElement("div");t.classList.add("select_optgroup"),t.innerText=n[e].label,L.appendChild(t),I(n[e].querySelectorAll("option"))}else I(c);function I(e){for(let s=0;s<e.length;s++){t=document.createElement("li");let n=document.createElement("span");if(t.appendChild(n),n.textContent=e[s].textContent,t.setAttribute("data-value",e[s].value),t.setAttribute("data-index",`${o++}`),L.appendChild(t),a.textContent===e[s].textContent&&(t.classList.add(d),p.textContent=e[s].textContent),c[i++].getAttribute("data-srcImg")){let n=e[s].getAttribute("data-srcImg");(l=document.createElement("img")).classList.add(r,m),l.setAttribute("src",n),t.appendChild(l)}}}if(L.addEventListener("click",e=>{const t=e.target;if("DIV"===t.tagName);else{u.innerHTML=t.closest("li").innerHTML,s.options.selectedIndex=+t.closest("li").getAttribute("data-index");for(let e=0;e<c.length;e++)L.querySelectorAll("li")[e].classList.remove(d),t.closest("li").classList.add(d);localStorage.setItem("selectedList",t.closest("li").getAttribute("data-index")),localStorage.setItem("btn",t.closest("li").innerHTML),localStorage.setItem("selected",c[s.selectedIndex].value)}}),u.addEventListener("click",function(){L.classList.toggle("open"),u.classList.toggle("active")}),document.addEventListener("mouseup",function(e){u.contains(e.target)||e.target.classList.contains("select_optgroup")||(L.classList.remove("open"),u.classList.remove("active"))}),localStorage.getItem("selectedList")){for(let e=0;e<c.length;e++)L.querySelectorAll("li")[e].classList.remove(d);L.querySelectorAll("li")[localStorage.getItem("selectedList")].classList.add(d)}localStorage.getItem("btn")&&(u.innerHTML=localStorage.getItem("btn")),g.appendChild(u),g.appendChild(L),s.parentNode.insertBefore(g,s),s.style.display="none"};